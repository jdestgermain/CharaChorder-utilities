!function(){"use strict";var r={};function e(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function t(r,t){if(r){if("string"===typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}function n(r,e){var n="undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=t(r))||e&&r&&"number"===typeof r.length){n&&(r=n);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,s=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return i=r.done,r},e:function(r){s=!0,u=r},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw u}}}}function o(r){return function(r){if(Array.isArray(r))return e(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||t(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a,u,i=[],s=!0,l=!1;try{if(a=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=a.call(t)).done)&&(i.push(n.value),i.length!==e);s=!0);}catch(r){l=!0,o=r}finally{try{if(!s&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(l)throw o}}return i}}(r,e)||t(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(r,e,t,u){var i=2,s=["LEFT_ALT","RIGHT_ALT"],l={",":";",u:"s","'":"y",".":"j",o:"n",i:"l",e:"t",SPACE:"SPACE",BKSP:"ENTER",r:"a",v:"p",m:"h",c:"d",k:"f",z:"q",w:"b",g:null,x:null},f=Object.fromEntries(Object.entries(l).map((function(r){var e=a(r,2),t=e[0];return[e[1],t]}))),c={LH_PINKY:["LEFT_ALT"],LH_RING_1:[",","u","'"],LH_MID_1:[".","o","i"],LH_INDEX:["e","r","SPACE","BKSP"],LH_THUMB_1:["m","v","k","c"],LH_THUMB_2:["g","z","w"],RH_THUMB_2:["x","b","q","DUP"],RH_THUMB_1:["p","f","d","h"],RH_INDEX:["a","t","SPACE","ENTER"],RH_MID_1:["l","n","j"],RH_RING_1:["y","s",";"],RH_PINKY:["RIGHT_ALT"]},y={LH_PINKY:["LEFT_ALT","LH_PINKY_3D"],LH_RING_1:[",","u","'","LH_RING_1_3D"],LH_MID_1:[".","o","i","LH_MID_1_3D"],LH_INDEX:["e","r","LH_INDEX_3D","SPACE","BKSP"],LH_THUMB:["m","v","k","c","LH_THUMB_1_3D","g","z","w","LH_THUMB_1_3D"],RH_THUMB:["x","b","q","DUP","RH_THUMB_1_3D","p","f","d","h","RH_THUMB_2_3D"],RH_INDEX:["a","t","RH_INDEX_3D","SPACE","ENTER"],RH_MID_1:["l","n","j","RH_MID_1_3D"],RH_RING_1:["y","s",";","RH_RING_1_3D"],RH_PINKY:["RIGHT_ALT","RH_PINKY_3D"]},d={group_1:["a","n","y"],group_2:["r","o","'"]},_={impulse_chord:["DUP","i"]},v={useDupKey:t.useDupKey,useMirroredKeys:t.useMirroredKeys,useAltKeys:t.useAltKeys,use3dKeys:t.use3dKeys,sliderValue:e,chordLibrary:u},h=v.useDupKey,p=v.useMirroredKeys,m=v.useAltKeys,g=v.use3dKeys,H=v.sliderValue[0],b=v.sliderValue[1],I={},S=new Map,R=o(new Set(r.map((function(r){return r.toLowerCase()})))),D={onlyCharsGenerator:function(r){var e,t=n(P(r));try{for(t.s();!(e=t.n()).done;){var o=e.value;if(E(o))return o}}catch(a){t.e(a)}finally{t.f()}},useMirroredKeysGenerator:function(r){var e,t=n(P(o(new Set([].concat(o(r),o(function(r){return r.map((function(r){return l[r]||f[r]})).filter(Boolean)}(r)))))));try{for(t.s();!(e=t.n()).done;){var a=e.value;if(E(a))return a}}catch(u){t.e(u)}finally{t.f()}},useAltKeysGenerator:function(r){var e,t=n(P(o(new Set([].concat(o(r),s)))));try{for(t.s();!(e=t.n()).done;){var a=e.value;if(E(a))return a}}catch(u){t.e(u)}finally{t.f()}},use3dKeysGenerator:function(r){var e,t=n(P(o(new Set([].concat(o(r),o(function(r){return r.map((function(r){return function(r){for(var e=0,t=Object.entries(c);e<t.length;e++){var n=a(t[e],2),o=n[0];if(n[1].includes(r))return"".concat(o,"_3D")}return null}(r)})).filter(Boolean)}(r)))))));try{for(t.s();!(e=t.n()).done;){var u=e.value;if(E(u))return u}}catch(i){t.e(i)}finally{t.f()}}},A={onlyChars:!0,useMirroredKeys:p,useAltKeys:m,use3dKeys:g};function L(){return R.filter((function(r){return r.length>=i}))}function M(r){for(var e=0,t=Object.keys(D);e<t.length;e++){var n=t[e],o=n.replace("Generator","");if(A[o]){var a=D[n](r);if(a)return a.slice().sort().reverse()}}return null}function N(r){var e=r.split("").filter((function(r){return" "!==r})),t=o(new Set(e));t.length<e.length&&h&&(t=[].concat(o(new Set(e)),["DUP"]));var n=Object.values(c).flat();return t.filter((function(r){return n.includes(r)}))}function T(r,e){I[r]=e}function E(r){return!function(r){var e=o(r).sort();return!!function(r){return r.length>new Set(r).size}(r)||(!!Object.values(y).some((function(e){return e.filter((function(e){return r.includes(e)})).length>1}))||(!!Object.values(d).some((function(e){return e.filter((function(e){return r.includes(e)})).length>2}))||!!Object.values(_).some((function(r){return JSON.stringify(o(r).sort())===JSON.stringify(e)}))))}(r)&&!function(r){var e=o(r).sort();return Object.values(I).some((function(r){var t=o(r).sort();return JSON.stringify(t)===JSON.stringify(e)}))}(r)&&!function(r){var e,t=o(r).sort(),u=n(S.entries());try{for(u.s();!(e=u.n()).done;){var i,s=n(a(e.value,2)[1]);try{for(s.s();!(i=s.n()).done;){var l=o(i.value).sort();if(JSON.stringify(l)===JSON.stringify(t))return!0}}catch(f){s.e(f)}finally{s.f()}}}catch(f){u.e(f)}finally{u.f()}return!1}(r)}var K={};function P(r){return function(r){var e=r.join(",");if(K[e])return K[e];var t,o=[[]],a=n(r);try{for(a.s();!(t=a.n()).done;)for(var u=t.value,i=o.length,s=0;s<i;s++){var l=o[s];o.push(l.concat(u))}}catch(f){a.e(f)}finally{a.f()}return K[e]=o,o}(r).filter((function(r){return r.length>=H&&r.length<=b})).sort((function(r,e){return r.length-e.length}))}return function(){new Promise((function(r,e){try{if(!u||!Array.isArray(u))return console.warn("chordLibrary is not properly initialized."),void r();u.forEach((function(r){if(r.chordInput&&r.chordOutput){var e=r.chordInput.trim().split(" + "),t=r.chordOutput.trim();S.has(t)?S.get(t).push(e):S.set(t,[e])}})),r()}catch(t){e(t)}}));for(var r=L().length,e=0,t=0,n=[],o=0;o<r;o++){var a=L()[o];if(S.has(a))t++;else{var i=M(N(a));i?T(a,i.sort().reverse()):n.push(a),e++,postMessage({type:"progress",progress:e/r*100})}}return{usedChords:I,skippedWordCount:t,failedWords:n}}()}self.onmessage=function(r){if("generateChords"===r.data.type){postMessage({type:"progress",progress:0});var e=u(r.data.wordsArray,r.data.sliderValue,r.data.checkboxStates,r.data.chordLibrary);postMessage({type:"result",result:e})}},addEventListener("message",(function(e){var t,n=e.data,o=n.type,a=n.method,u=n.id,i=n.params;"RPC"===o&&a&&((t=r[a])?Promise.resolve().then((function(){return t.apply(r,i)})):Promise.reject("No such method")).then((function(r){postMessage({type:"RPC",id:u,result:r})})).catch((function(r){var e={message:r};r.stack&&(e.message=r.message,e.stack=r.stack,e.name=r.name),postMessage({type:"RPC",id:u,error:e})}))})),postMessage({type:"RPC",method:"ready"})}();
//# sourceMappingURL=d9977b1f65897ccc9c7a.worker.js.map